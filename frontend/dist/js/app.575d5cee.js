(function(){"use strict";var e={5450:function(e,t,o){var r=o(5130),a=o(6768);function n(e,t,o,r,n,s){const l=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(l)])}var s=o(782),l={name:"App",computed:{...(0,s.L8)({authUser:"auth/user",isLoggedIn:"auth/isLoggedIn"})},methods:{myFunction(){var e=document.getElementById("myTopnav");"topnav"===e.className?e.className+=" responsive":e.className="topnav"}}},i=o(1241);const c=(0,i.A)(l,[["render",n]]);var u=c,d=(o(4979),o(4373));const p=d.A.create({baseURL:"http://localhost:5000/api/",withCredentials:!0,xsrfCookieName:"csrf_access_token"});p.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e)));const m=!0,k={user:null,isLoggedIn:!1,token:null},b={isLoggedIn:e=>e.isLoggedIn,user:e=>e.user,token:e=>e.token},v={async loginUser({commit:e},t){try{const o=await p.post("/auth/login_jwt",t);localStorage.setItem("token",o.data.token),localStorage.setItem("user",JSON.stringify(o.data.user)),e("setToken",o.data.token),e("setUser",o.data.user)}catch(o){throw console.error("Error en login:",o),o}},async fetchUser({commit:e}){try{const t=await p.get("/auth/user_jwt");e("setUser",t.data)}catch(t){console.error("Error al obtener usuario:",t)}},async logoutUser({commit:e}){try{await p.get("/auth/logout_jwt"),e("clearUser")}catch(t){console.error("Error en logout:",t)}},async registerUser(e,t){const o=await d.A.post("http://localhost:5000/api/registrar_usuario",t);return o.data},setToken({commit:e},t){e("setToken",t)}},h={setUser(e,t){e.user=t},setToken(e,t){e.token=t,e.isLoggedIn=!0;const o=JSON.parse(atob(t.split(".")[1]));e.user=o},clearUser(e){e.isLoggedIn=!1,e.user=null,e.token=null,localStorage.removeItem("token"),localStorage.removeItem("user")}};var g={namespaced:m,state:k,getters:b,actions:v,mutations:h};const L=(0,s.y$)({modules:{auth:g}});var f=L,y=o(1387);const _={class:"cardContainer"},w={class:"card"},E={class:"card"};function C(e,t,o,r,n,s){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",_,[(0,a.Lk)("div",w,[(0,a.bF)(l,{class:"link",to:"/depositos"},{default:(0,a.k6)((()=>t[0]||(t[0]=[(0,a.Lk)("h3",{class:"title"},[(0,a.Lk)("b",null,"Administrar Red de Depositos")],-1),(0,a.Lk)("img",{class:"img-card",src:"/materiales.png",alt:"ilustracion de materiales"},null,-1)]))),_:1})]),(0,a.Lk)("div",E,[(0,a.bF)(l,{class:"link",to:"/ordenes"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.Lk)("h3",{class:"title"},[(0,a.Lk)("b",null,"Administrar Ordenes de los Depositos")],-1),(0,a.Lk)("img",{class:"img-card",src:"/recolector.png",alt:"ilustracion de recolectores"},null,-1)]))),_:1})])])])}var U={computed:{...(0,s.L8)({authUser:"auth/user",isLoggedIn:"auth/isLoggedIn"})},name:"Home-Component",components:{}};const I=(0,i.A)(U,[["render",C]]);var D=I,O=o(4232);const F={class:"round"};function N(e,t,o,r,n,s){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.recolectores.recolectores,(e=>((0,a.uX)(),(0,a.CE)("div",{class:"container",key:e.id},[(0,a.Lk)("div",F,[(0,a.bF)(l,{to:"/me/recolectores/recolector"+e.id},{default:(0,a.k6)((()=>[t[0]||(t[0]=(0,a.Lk)("b",null," Recolector: ",-1)),(0,a.eW)(" "+(0,O.v_)(e.name)+" "+(0,O.v_)(e.lastname)+" - ",1),t[1]||(t[1]=(0,a.Lk)("b",null,"DNI:",-1)),(0,a.eW)(" "+(0,O.v_)(e.doc_number),1)])),_:2},1032,["to"])])])))),128))])}var X={name:"Recolector-Index",data(){return{page:this.$route.params.page,members:[]}},async created(){await p.get("/me/recolectores/").then((e=>this.recolectores=e.data))}};const S=(0,i.A)(X,[["render",N]]);var V=S;const A={class:"container"},x={class:"table-responsive"},P={class:"table"},q={scope:"row"},$={class:"center pbt"};function M(e,t,o,r,n,s){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",A,[(0,a.Lk)("div",x,[(0,a.Lk)("table",P,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[t[0]||(t[0]=(0,a.Lk)("th",{scope:"row"},"Nombre",-1)),(0,a.Lk)("td",null,(0,O.v_)(e.recolector.name),1)]),(0,a.Lk)("tr",null,[t[1]||(t[1]=(0,a.Lk)("th",{scope:"row"},"Apellido",-1)),(0,a.Lk)("td",null,(0,O.v_)(e.recolector.lastname),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("th",q,(0,O.v_)(n.member.doc_type),1),(0,a.Lk)("td",null,(0,O.v_)(e.recolector.doc_number),1)]),(0,a.Lk)("tr",null,[t[2]||(t[2]=(0,a.Lk)("th",{scope:"row"},"Número de télefono",-1)),(0,a.Lk)("td",null,(0,O.v_)(e.recolector.phone_number),1)]),(0,a.Lk)("tr",null,[t[3]||(t[3]=(0,a.Lk)("th",{scope:"row"},"Email",-1)),(0,a.Lk)("td",null,(0,O.v_)(e.recolector.email),1)]),(0,a.Lk)("tr",null,[t[4]||(t[4]=(0,a.Lk)("th",{scope:"row"},"Estado",-1)),(0,a.Lk)("td",null,(0,O.v_)(e.recolector.state),1)])])])]),(0,a.Lk)("div",$,[(0,a.bF)(l,{to:"materiales/new"+e.material.id,class:"btn btn-success",title:"Nueva carga de material"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)(" Nueva carga de material ")]))),_:1},8,["to"]),(0,a.bF)(l,{to:"/me/members",class:"btn btn-primary",title:"Volver"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)(" Volver ")]))),_:1})])])])}var W={name:"Recolector-Show",data(){return{page:this.$route.params.page,id:this.$route.params.id,member:[]}},async created(){await p.get("/ordenes/"+this.id).then((e=>this.member=e.data.member))}};const T=(0,i.A)(W,[["render",M]]);var j=T;const J={class:"register"},R={class:"register-right"},K={class:"tab-content",id:"myTabContent"},z={class:"row register-form"},B={class:"col-md-12 profile_card"},H={class:"password-input-wrapper"},Q=["type"];function Y(e,t,o,n,s,l){const i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",J,[t[8]||(t[8]=(0,a.Lk)("div",{class:"register-left"},[(0,a.Lk)("img",{src:"/logo.png",alt:"logo"}),(0,a.Lk)("h1",null,[(0,a.eW)("Bienvenido a"),(0,a.Lk)("br"),(0,a.eW)("Ecocycle")])],-1)),(0,a.Lk)("div",R,[(0,a.Lk)("div",K,[t[7]||(t[7]=(0,a.Lk)("h1",{class:"register-heading"},"Iniciar sesión",-1)),(0,a.Lk)("div",z,[(0,a.Lk)("div",B,[(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,r.D$)(((...e)=>l.login&&l.login(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{type:"email",class:"form-input",placeholder:"Escriba su email","onUpdate:modelValue":t[0]||(t[0]=t=>e.user.email=t),required:""},null,512),[[r.Jo,e.user.email]]),t[4]||(t[4]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",H,[(0,a.bo)((0,a.Lk)("input",{type:e.showPassword?"text":"password",class:"form-input",placeholder:"Escriba su contraseña","onUpdate:modelValue":t[1]||(t[1]=t=>e.user.password=t),required:""},null,8,Q),[[r.hp,e.user.password]]),(0,a.Lk)("button",{type:"button",class:"toggle-password",onClick:t[2]||(t[2]=(...e)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...e))},(0,O.v_)(e.showPassword?"Ocultar":"Ver"),1)]),t[5]||(t[5]=(0,a.Lk)("div",{class:"float-center"},[(0,a.Lk)("input",{style:{padding:"10px 40px","font-size":"120%"},type:"submit",class:"btn btn-outline-light",value:"Entrar"})],-1))],32)]),(0,a.bF)(i,{to:"/registrar"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("¿No tienes una cuenta? Regístrate aquí")]))),_:1})])])])])}o(4114);var G={name:"Login-Component",data:()=>({user:{email:null,password:null},showPassword:!1}),methods:{...(0,s.i0)("auth",["loginUser"]),async login(){try{await this.loginUser(this.user),this.user={email:null,password:null},this.$router.push("/")}catch(e){alert("Correo electrónico o contraseña incorrectos"),console.error("Error en el inicio de sesión:",e)}},togglePasswordVisibility(){this.showPassword=!this.showPassword}}};const Z=(0,i.A)(G,[["render",Y]]);var ee=Z;const te={class:"form-wrapper"},oe={class:"register-container"},re={key:0,class:"register-error-message"},ae={class:"link-to-login"};function ne(e,t,o,n,s,l){const i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",te,[(0,a.Lk)("div",oe,[t[8]||(t[8]=(0,a.Lk)("h3",null,"Registrarse",-1)),(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>l.registrar_usuario&&l.registrar_usuario(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{class:"register-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.user.name=e),placeholder:"Nombre",required:""},null,512),[[r.Jo,s.user.name]]),(0,a.bo)((0,a.Lk)("input",{class:"register-input",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.user.lastname=e),placeholder:"Apellido",required:""},null,512),[[r.Jo,s.user.lastname]]),(0,a.bo)((0,a.Lk)("input",{class:"register-input",type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>s.user.email=e),placeholder:"Email",required:""},null,512),[[r.Jo,s.user.email]]),(0,a.bo)((0,a.Lk)("input",{class:"register-input",type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>s.user.password=e),placeholder:"Contraseña",required:""},null,512),[[r.Jo,s.user.password]]),t[5]||(t[5]=(0,a.Lk)("button",{class:"register-button",type:"submit"},"Registrarse",-1))],32),s.error?((0,a.uX)(),(0,a.CE)("p",re,(0,O.v_)(s.errorMessage),1)):(0,a.Q3)("",!0),(0,a.Lk)("p",ae,[t[7]||(t[7]=(0,a.eW)(" ¿Ya tienes una cuenta? ")),(0,a.bF)(i,{to:"/iniciar-sesion",class:"login-link"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("Iniciar sesión")]))),_:1})])])])}var se={data(){return{user:{name:"",lastname:"",email:"",password:""},error:!1,errorMessage:""}},methods:{...(0,s.i0)("auth",["registerUser"]),async registrar_usuario(){try{await this.registerUser(this.user),this.$router.push("/iniciar-sesion")}catch(e){this.error=!0,this.errorMessage="Error al registrarse. Inténtalo de nuevo."}}}};const le=(0,i.A)(se,[["render",ne],["__scopeId","data-v-25a8e002"]]);var ie=le;const ce={class:"form-container"},ue={class:"form-group"},de={class:"form-group"},pe={class:"form-group"},me={class:"form-group"};function ke(e,t,o,n,s,l){return(0,a.uX)(),(0,a.CE)("div",ce,[t[12]||(t[12]=(0,a.Lk)("h2",null,"Alta de un Nuevo Plan de Recolección",-1)),(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>l.crearPlan&&l.crearPlan(...e)),["prevent"]))},[(0,a.Lk)("div",ue,[t[5]||(t[5]=(0,a.Lk)("label",{for:"nombre_plan"},"Nombre del Plan",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"nombre_plan","onUpdate:modelValue":t[0]||(t[0]=e=>s.nombre_plan=e),required:""},null,512),[[r.Jo,s.nombre_plan]])]),(0,a.Lk)("div",de,[t[7]||(t[7]=(0,a.Lk)("label",{for:"tipo_material"},"Tipo de Material",-1)),(0,a.bo)((0,a.Lk)("select",{id:"tipo_material","onUpdate:modelValue":t[1]||(t[1]=e=>s.tipo_material=e),required:""},t[6]||(t[6]=[(0,a.Fv)('<option value="vidrio">Vidrio</option><option value="plastico">Plástico</option><option value="carton">Cartón</option><option value="metal">Metal</option><option value="cable">Cable</option><option value="envases">Envases</option>',6)]),512),[[r.u1,s.tipo_material]])]),(0,a.Lk)("div",pe,[t[8]||(t[8]=(0,a.Lk)("label",{for:"cantidad"},"Cantidad",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",id:"cantidad","onUpdate:modelValue":t[2]||(t[2]=e=>s.cantidad=e),required:""},null,512),[[r.Jo,s.cantidad]])]),(0,a.Lk)("div",me,[t[10]||(t[10]=(0,a.Lk)("label",{for:"area_recoleccion"},"Área de Recolección",-1)),(0,a.bo)((0,a.Lk)("select",{id:"area_recoleccion","onUpdate:modelValue":t[3]||(t[3]=e=>s.area_recoleccion=e),required:""},t[9]||(t[9]=[(0,a.Lk)("option",{value:"comercios"},"Comercios",-1),(0,a.Lk)("option",{value:"hogares"},"Hogares",-1),(0,a.Lk)("option",{value:"fábricas"},"Fábricas",-1),(0,a.Lk)("option",{value:"talleres"},"Talleres",-1)]),512),[[r.u1,s.area_recoleccion]])]),t[11]||(t[11]=(0,a.Lk)("button",{type:"submit",class:"btn-submit"},"Crear Plan",-1))],32)])}var be={name:"Material-New",data(){return{nombre_plan:"",tipo_material:"",cantidad:"",area_recoleccion:""}},methods:{crearPlan(){const e={nombre_plan:this.nombre_plan,tipo_material:this.tipo_material,cantidad:this.cantidad,area_recoleccion:this.area_recoleccion};fetch("http://127.0.0.1:5000/api/planes/crear-plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{alert(e.message)})).catch((e=>{console.error("Error:",e)}))}},mounted(){document.body.classList.add("form-screen")},beforeUnmount(){document.body.classList.remove("form-screen")}};const ve=(0,i.A)(be,[["render",ke]]);var he=ve;const ge={class:"navbar navcolor"},Le={class:"nav nav-pills mb-3",role:"tablist"},fe={class:"nav-item dropdown"},ye={class:"nav-link dropbtn custom-name-btn"},_e={class:"dropdown-content"},we={class:"topnav",id:"myTopnav"},Ee={class:"contentrouter"};function Ce(e,t,o,n,s,l){const i=(0,a.g2)("router-link"),c=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.Lk)("nav",ge,[(0,a.bF)(i,{to:"/",class:"navbar-brand",style:{"margin-left":"30px"}},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.Lk)("img",{src:"/logo.png",class:"logosize",alt:"Logo"},null,-1),(0,a.Lk)("span",{style:{color:"white"}}," Ecocycle",-1)]))),_:1}),(0,a.Lk)("ul",Le,[(0,a.Lk)("li",fe,[(0,a.Lk)("button",ye,(0,O.v_)(e.authUser?`${e.authUser.lastname} ${e.authUser.name}`:"Cuenta"),1),(0,a.Lk)("div",_e,[(0,a.Lk)("a",{href:"/",onClick:t[0]||(t[0]=(0,r.D$)(((...e)=>l.cerrarSesion&&l.cerrarSesion(...e)),["prevent"]))},"Cerrar Sesion")])])])]),(0,a.Lk)("div",we,[(0,a.bF)(i,{to:"/"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)("Inicio")]))),_:1}),(0,a.bF)(i,{to:"/ordenes"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)("Ordenes")]))),_:1}),(0,a.bF)(i,{to:"/depositos"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)("Depósitos")]))),_:1}),(0,a.bF)(i,{to:"/materiales/material/new"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)("Plan de material")]))),_:1})])]),(0,a.Lk)("div",Ee,[(0,a.bF)(c)])],64)}var Ue={name:"App",computed:{...(0,s.L8)({authUser:"auth/user",isLoggedIn:"auth/isLoggedIn"})},mounted(){const e=localStorage.getItem("user");e&&this.$store.commit("auth/setUser",JSON.parse(e))},methods:{myFunction(){var e=document.getElementById("myTopnav");"topnav"===e.className?e.className+=" responsive":e.className="topnav"},cerrarSesion(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/iniciar-sesion"),window.location.reload()},async loadUser(){try{await this.$store.dispatch("auth/loadUser")}catch(e){console.error("Error cargando el usuario:",e)}}}};const Ie=(0,i.A)(Ue,[["render",Ce]]);var De=Ie;const Oe={class:"container"},Fe={key:0},Ne={class:"table-responsive"},Xe={class:"table"},Se=["onClick"],Ve={key:1},Ae={class:"center pbt"};function xe(e,t,o,r,n,s){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",Oe,[n.ordenes.length?((0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.Lk)("div",Ne,[(0,a.Lk)("table",Xe,[t[0]||(t[0]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Nombre de Orden"),(0,a.Lk)("th",null,"Estado de la Orden"),(0,a.Lk)("th",null,"Nombre del Depósito"),(0,a.Lk)("th",null,"Materiales")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.ordenes,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,O.v_)(e.nombre_orden),1),(0,a.Lk)("td",null,[(0,a.eW)((0,O.v_)(e.reserva?"Entregado":"Pendiente")+" ",1),(0,a.Lk)("button",{onClick:t=>s.toggleEstado(e.id),class:"btn btn-warning ml-2"},"Cambiar Estado",8,Se)]),(0,a.Lk)("td",null,(0,O.v_)(e.deposito_nombre),1),(0,a.Lk)("td",null,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.materiales,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},(0,O.v_)(e.nombre)+" - "+(0,O.v_)(e.cantidad),1)))),128))])])])))),128))])])])])):((0,a.uX)(),(0,a.CE)("div",Ve,t[1]||(t[1]=[(0,a.Lk)("p",null,"No hay órdenes cargadas.",-1)]))),(0,a.Lk)("div",Ae,[(0,a.bF)(l,{to:"/ordenes/nueva",class:"btn btn-success",title:"Nueva Orden"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)(" Crear Nueva Orden ")]))),_:1}),(0,a.bF)(l,{to:"/",class:"btn btn-primary",title:"Volver"},{default:(0,a.k6)((()=>t[3]||(t[3]=[(0,a.eW)(" Volver ")]))),_:1})])])])}var Pe={name:"OrdenList",data(){return{ordenes:[]}},async created(){await this.fetchOrdenes()},methods:{async fetchOrdenes(){try{const e=await p.get("/ordenes");this.ordenes=e.data.ordenes}catch(e){console.error("Error al obtener las órdenes:",e),this.ordenes=[]}},async toggleEstado(e){try{const t=this.ordenes.find((t=>t.id===e)),o=!t.reserva;await p.put(`/ordenes/${e}/estado`,{reserva:o}),t.reserva=o}catch(t){console.error("Error al cambiar el estado:",t)}}}};const qe=(0,i.A)(Pe,[["render",xe]]);var $e=qe;const Me={class:"container"},We={class:"form-group"},Te={class:"form-group"},je=["value"],Je={class:"form-group"},Re={class:"form-row"},Ke={class:"col"},ze=["onUpdate:modelValue"],Be=["value"],He={class:"col"},Qe=["onUpdate:modelValue"],Ye={class:"col-auto"},Ge=["onClick"];function Ze(e,t,o,n,s,l){const i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Me,[t[13]||(t[13]=(0,a.Lk)("h2",null,"Crear Nueva Orden",-1)),(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,r.D$)(((...e)=>l.crearOrden&&l.crearOrden(...e)),["prevent"]))},[(0,a.Lk)("div",We,[t[4]||(t[4]=(0,a.Lk)("label",{for:"nombre_orden"},"Nombre de la Orden",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"nombre_orden","onUpdate:modelValue":t[0]||(t[0]=e=>s.orden.nombre_orden=e),class:"form-control",placeholder:"Ingresa el nombre de la orden",required:""},null,512),[[r.Jo,s.orden.nombre_orden]])]),(0,a.Lk)("div",Te,[t[5]||(t[5]=(0,a.Lk)("label",{for:"deposito_id"},"Depósito",-1)),(0,a.bo)((0,a.Lk)("select",{id:"deposito_id","onUpdate:modelValue":t[1]||(t[1]=e=>s.orden.deposito_id=e),class:"form-control",required:""},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.depositos,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,O.v_)(e.nombre),9,je)))),128))],512),[[r.u1,s.orden.deposito_id]])]),(0,a.Lk)("div",Je,[t[8]||(t[8]=(0,a.Lk)("h4",null,"Materiales",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.orden.materiales,((e,o)=>((0,a.uX)(),(0,a.CE)("div",{key:o,class:"form-material"},[(0,a.Lk)("div",Re,[(0,a.Lk)("div",Ke,[t[6]||(t[6]=(0,a.Lk)("label",{for:"material_id"},"Material",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t=>e.material_id=t,class:"form-control",required:""},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.materiales,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,O.v_)(e.nombre),9,Be)))),128))],8,ze),[[r.u1,e.material_id]])]),(0,a.Lk)("div",He,[t[7]||(t[7]=(0,a.Lk)("label",{for:"cantidad"},"Cantidad",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.cantidad=t,class:"form-control",placeholder:"Cantidad",required:""},null,8,Qe),[[r.Jo,e.cantidad]])]),(0,a.Lk)("div",Ye,[(0,a.Lk)("button",{type:"button",onClick:e=>l.removeMaterial(o),class:"btn btn-danger"},"Quitar",8,Ge)])])])))),128)),(0,a.Lk)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>l.addMaterial&&l.addMaterial(...e)),class:"btn btn-secondary mt-2"},"Agregar Material")]),t[10]||(t[10]=(0,a.Lk)("button",{type:"submit",class:"btn btn-primary mt-4 btncreate"},"Crear Orden",-1)),t[11]||(t[11]=(0,a.Lk)("br",null,null,-1)),t[12]||(t[12]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(i,{to:"/ordenes",class:"btn btn-primary",title:"Volver"},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.eW)(" Volver ")]))),_:1})],32)])}var et={name:"CrearOrden",data(){return{orden:{nombre_orden:"",reserva:!0,deposito_id:null,materiales:[{material_id:null,cantidad:1}]},depositos:[],materiales:[]}},async created(){await this.fetchDepositos(),await this.fetchMateriales()},methods:{async fetchDepositos(){try{const e=await p.get("/depositos");this.depositos=e.data.depositos}catch(e){console.error("Error al cargar los depósitos:",e)}},async fetchMateriales(){try{const e=await p.get("/materiales");this.materiales=e.data.materiales}catch(e){console.error("Error al cargar los materiales:",e)}},addMaterial(){this.orden.materiales.push({material_id:null,cantidad:1})},removeMaterial(e){this.orden.materiales.splice(e,1)},async crearOrden(){try{await p.post("/ordenes",this.orden),this.$router.push("/ordenes")}catch(e){console.error("Error al crear la orden:",e)}}}};const tt=(0,i.A)(et,[["render",Ze],["__scopeId","data-v-35d20cc6"]]);var ot=tt;const rt={class:"container"},at={class:"table-responsive"},nt={class:"table"},st={key:0},lt={key:1},it={class:"center pbt"};function ct(e,t,o,r,n,s){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",rt,[(0,a.Lk)("div",at,[(0,a.Lk)("table",nt,[t[0]||(t[0]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Nombre del Depósito"),(0,a.Lk)("th",null,"Ubicacion"),(0,a.Lk)("th",null,"Lista de proveedores a los que pertenece"),(0,a.Lk)("th",null,"Cantidad de Órdenes")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.depositos,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,O.v_)(e.nombre),1),(0,a.Lk)("td",null,(0,O.v_)(e.ubicacion),1),(0,a.Lk)("td",null,[e.materiales&&e.materiales.length?((0,a.uX)(),(0,a.CE)("ul",st,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.materiales,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e.id},(0,O.v_)(e.nombre),1)))),128))])):((0,a.uX)(),(0,a.CE)("p",lt,"No está en ninguna lista de proveedores."))]),(0,a.Lk)("td",null,(0,O.v_)(e.cantidad_ordenes),1)])))),128))])])]),(0,a.Lk)("div",it,[(0,a.bF)(l,{to:"/deposito/nueva",class:"btn btn-success",title:"Registrar nuevo depósito"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.eW)(" Registrar nuevo depósito ")]))),_:1}),(0,a.bF)(l,{to:"/",class:"btn btn-primary",title:"Volver"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.eW)(" Volver ")]))),_:1})])])])}var ut={name:"DepositoList",data(){return{depositos:[]}},async created(){await this.fetchDepositos()},methods:{async fetchDepositos(){try{const e=await p.get("/depositos");this.depositos=e.data.depositos}catch(e){console.error("Error al obtener los depósitos:",e)}}}};const dt=(0,i.A)(ut,[["render",ct]]);var pt=dt;const mt={class:"container"},kt={class:"form-group"},bt={class:"form-group"};function vt(e,t,o,n,s,l){const i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",mt,[t[7]||(t[7]=(0,a.Lk)("h2",null,"Crear Nuevo Depósito",-1)),(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)(((...e)=>l.crearDeposito&&l.crearDeposito(...e)),["prevent"]))},[(0,a.Lk)("div",kt,[t[3]||(t[3]=(0,a.Lk)("label",{for:"nombre"},"Nombre del Depósito",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.nuevoDeposito.nombre=e),class:"form-control",id:"nombre",required:""},null,512),[[r.Jo,s.nuevoDeposito.nombre]])]),(0,a.Lk)("div",bt,[t[4]||(t[4]=(0,a.Lk)("label",{for:"ubicacion"},"Ubicación",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.nuevoDeposito.ubicacion=e),class:"form-control",id:"ubicacion",required:""},null,512),[[r.Jo,s.nuevoDeposito.ubicacion]])]),t[6]||(t[6]=(0,a.Lk)("button",{type:"submit",class:"btn btn-success"},"Crear Depósito",-1)),(0,a.bF)(i,{to:"/depositos",class:"btn btn-secondary ml-2"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)("Volver")]))),_:1})],32)])])}var ht={name:"CrearDeposito",data(){return{nuevoDeposito:{nombre:"",ubicacion:""}}},methods:{async verificarDepositoExistente(){try{const e=await p.get("/depositos",{params:{nombre:this.nuevoDeposito.nombre,ubicacion:this.nuevoDeposito.ubicacion}});e.data.length>0?this.depositoExistente=!0:this.depositoExistente=!1}catch(e){console.error("Error al verificar si el depósito ya existe:",e)}},async crearDeposito(){if(await this.verificarDepositoExistente(),this.depositoExistente)alert("Ya existe un depósito con el mismo nombre o ubicación.");else try{const e=await p.post("/depositos",this.nuevoDeposito);console.log("Depósito creado exitosamente:",e.data),this.$router.push("/depositos")}catch(e){console.error("Error al crear el depósito:",e)}}}};const gt=(0,i.A)(ht,[["render",vt]]);var Lt=gt;const ft=[{path:"/",component:De,meta:{requiresAuth:!0},children:[{path:"",name:"Home-Component",component:D},{path:"materiales/material/new",name:"Formulario-Material",component:he},{path:"recolectores/recolector/:id",name:"Recolector-Show",component:j},{path:"recolectores/recolectores",name:"Recolectores-Show",component:V},{path:"/ordenes",name:"Ordenes",component:$e},{path:"/ordenes/nueva",name:"CrearOrden",component:ot},{path:"/depositos",name:"Depositos",component:pt},{path:"/deposito/nueva",name:"CrearDeposito",component:Lt}]},{path:"/iniciar-sesion",name:"Login-Component",component:ee,beforeEnter:(e,t,o)=>{f.getters["auth/isLoggedIn"]?o("/"):o()}},{path:"/registrar",name:"Register",component:ie}],yt=(0,y.aE)({history:(0,y.LA)(),routes:ft});yt.beforeEach(((e,t,o)=>{const r=localStorage.getItem("token");e.meta.requiresAuth&&!r?o("/iniciar-sesion"):o()}));var _t=yt;o(9313);d.A.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e})),d.A.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&console.error("No autorizado, redirigiendo a login..."),Promise.reject(e)))),(0,r.Ef)(u).use(_t).use(f).mount("#app")}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,r,a,n){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],a=e[u][1],n=e[u][2];for(var l=!0,i=0;i<r.length;i++)(!1&n||s>=n)&&Object.keys(o.O).every((function(e){return o.O[e](r[i])}))?r.splice(i--,1):(l=!1,n<s&&(s=n));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,a,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,n,s=r[0],l=r[1],i=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(i)var u=i(o)}for(t&&t(r);c<s.length;c++)n=s[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(u)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(5450)}));r=o.O(r)})();
//# sourceMappingURL=app.575d5cee.js.map